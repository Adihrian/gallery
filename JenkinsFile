pipeline{
    agent any

    stages{
        stage("Checkout Code"){
            steps{
                echo "Checking out code from GitHub"
                git branch: "master", url:"https://github.com/Adihrian/gallery.git"
            }
        }
        stage("Install Dependencies"){
            steps{
                sh "npm install"
            }
        }
        stage("Build & test"){
            steps{
                echo "No tests yet, skipping..."
            }
        }
        stage("Deploy"){
            steps{
                sh "node server.js &"
                echo "Deployed to Render"
            }
        }
    }
    post{
        success{
            echo "Pipeline completed succesfully"
        }
        failure{
            echo "Pipeline failed"
        }
    }
}